#!/usr/bin/env sh
# husky v9 - husky.sh is deprecated but still works in v9

# Add bun to PATH if not already there
if [ -z "$BUN_INSTALL" ]; then
  export BUN_INSTALL="$HOME/.bun"
fi
export PATH="$BUN_INSTALL/bin:$PATH"

# Verify bun is available
if ! command -v bun >/dev/null 2>&1; then
  echo "Error: bun not found in PATH. Please install bun or add it to your PATH."
  exit 1
fi

# Run tests in mobile app (if it exists)
if [ -d "apps/mobile" ]; then
  cd apps/mobile && bun test
else
  echo "Warning: apps/mobile directory not found, skipping tests"
fi
